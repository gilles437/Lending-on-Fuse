{"ast":null,"code":"var _jsxFileName = \"/Users/gilles/lending-app/lending-fe-dapp/src/components/BorrowDetails.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { FaCoins, FaClock, FaHeartbeat, FaDollarSign, FaPercentage } from 'react-icons/fa';\nimport './BorrowDetails.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BorrowDetails = ({\n  healthFactor,\n  web3,\n  account,\n  contract\n}) => {\n  _s();\n  const [principal, setPrincipal] = useState(null);\n  const [accruedInterest, setAccruedInterest] = useState(null);\n  const [lastBorrowTime, setLastBorrowTime] = useState(null);\n  useEffect(() => {\n    async function fetchDebtInfo() {\n      if (web3 && account && contract) {\n        try {\n          // Call the getDebtInfo function from the smart contract\n          const debtInfo = await contract.methods.getDebtInfo(account).call();\n          setPrincipal(Number(web3.utils.fromWei(debtInfo.principal, 'mwei')).toFixed(6));\n          setAccruedInterest(web3.utils.fromWei(debtInfo.accruedInterest, 'ether'));\n          setLastBorrowTime(debtInfo.lastBorrowTime);\n        } catch (error) {\n          console.error(\"Error fetching debt info:\", error);\n        }\n      }\n    }\n    fetchDebtInfo();\n  }, [web3, account, contract]);\n  function pad(n) {\n    return n < 10 ? '0' + n : n;\n  }\n  const displayDate = borrowTime => {\n    const timeStampInSecs = Math.ceil(Number(borrowTime) * 1000);\n    const borrowDate = new Date(timeStampInSecs);\n    function pad(n) {\n      return n < 10 ? '0' + n : n;\n    }\n    const localDateTime = borrowDate.getFullYear() + \"-\" + pad(borrowDate.getMonth() + 1) + \"-\" + pad(borrowDate.getDate()) + \" \" + pad(borrowDate.getHours()) + \":\" + pad(borrowDate.getMinutes()) + \":\" + pad(borrowDate.getSeconds());\n    return localDateTime;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"borrow-details-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"borrow-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"borrow-item\",\n          children: [/*#__PURE__*/_jsxDEV(FaHeartbeat, {\n            className: \"icon\",\n            title: \"The collateral value divided by the debt, if debt is not null, otherwise infinite.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\"Health Factor: \", healthFactor == 2 ** 256 - 1 ? '∞' : `${parseFloat(healthFactor).toFixed(2)}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 24\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"borrow-item\",\n          children: [/*#__PURE__*/_jsxDEV(FaCoins, {\n            className: \"icon\",\n            title: \"The borrow you made\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Borrow:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 24\n            }, this), \" \", principal ? `${parseFloat(principal).toFixed(6)}` : 0, \" USDC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"borrow-info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"borrow-item\",\n          children: [/*#__PURE__*/_jsxDEV(FaPercentage, {\n            className: \"icon\",\n            title: \"The accrued interest of the borrow you made\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Accrued Interest:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 24\n            }, this), \" \", accruedInterest ? `${parseFloat(accruedInterest).toFixed(6)}` : 0]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 13\n  }, this);\n};\n_s(BorrowDetails, \"NVVsmxiygr+bl3q5zT28ZakTzDE=\");\n_c = BorrowDetails;\nexport default BorrowDetails;\nvar _c;\n$RefreshReg$(_c, \"BorrowDetails\");","map":{"version":3,"names":["React","useEffect","useState","FaCoins","FaClock","FaHeartbeat","FaDollarSign","FaPercentage","jsxDEV","_jsxDEV","BorrowDetails","healthFactor","web3","account","contract","_s","principal","setPrincipal","accruedInterest","setAccruedInterest","lastBorrowTime","setLastBorrowTime","fetchDebtInfo","debtInfo","methods","getDebtInfo","call","Number","utils","fromWei","toFixed","error","console","pad","n","displayDate","borrowTime","timeStampInSecs","Math","ceil","borrowDate","Date","localDateTime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","children","className","title","fileName","_jsxFileName","lineNumber","columnNumber","parseFloat","_c","$RefreshReg$"],"sources":["/Users/gilles/lending-app/lending-fe-dapp/src/components/BorrowDetails.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { FaCoins, FaClock, FaHeartbeat, FaDollarSign, FaPercentage } from 'react-icons/fa';\nimport './BorrowDetails.css';\n\nconst BorrowDetails = ({ healthFactor, web3, account, contract }) => {\n    const [principal, setPrincipal] = useState(null);\n    const [accruedInterest, setAccruedInterest] = useState(null);\n    const [lastBorrowTime, setLastBorrowTime] = useState(null);\n\n    useEffect(() => {\n        async function fetchDebtInfo() {\n            if (web3 && account && contract) {\n                try {\n                    // Call the getDebtInfo function from the smart contract\n                    const debtInfo = await contract.methods.getDebtInfo(account).call();\n\n                    setPrincipal(Number(web3.utils.fromWei(debtInfo.principal, 'mwei')).toFixed(6));  \n                    setAccruedInterest(web3.utils.fromWei(debtInfo.accruedInterest, 'ether'));\n                    setLastBorrowTime(debtInfo.lastBorrowTime);\n             \n                } catch (error) {\n                    console.error(\"Error fetching debt info:\", error);\n                }\n            }\n        }\n\n        fetchDebtInfo();\n    }, [web3, account, contract]);\n\n    function pad(n) {\n        return n<10 ? '0'+n : n;\n    }\n\n    const displayDate = (borrowTime) => {\n        const timeStampInSecs = Math.ceil(Number(borrowTime) * 1000);\n\n        const borrowDate = new Date(timeStampInSecs)\n        function pad(n) {\n            return n<10 ? '0'+n : n;\n        }\n        \n        const localDateTime = borrowDate.getFullYear() +\n                      \"-\" +pad(borrowDate.getMonth()+1) +\n                      \"-\" + pad(borrowDate.getDate()) +\n                      \" \" + pad(borrowDate.getHours()) +\n                      \":\" + pad(borrowDate.getMinutes()) +\n                      \":\" + pad(borrowDate.getSeconds());\n\n        return localDateTime;\n\n    }\n    return (<div>\n        <div className=\"borrow-details-card\">\n            <div className=\"borrow-info\">\n                <div className=\"borrow-item\">\n                    <FaHeartbeat className=\"icon\" title=\"The collateral value divided by the debt, if debt is not null, otherwise infinite.\" />\n                    <p><strong>Health Factor: {(healthFactor  == (2**256-1)) ? '∞' : `${parseFloat(healthFactor).toFixed(2)}` }</strong></p>\n                </div>\n                <div className=\"borrow-item\">\n                    <FaCoins className=\"icon\" title=\"The borrow you made\"/>\n                    <p><strong>Borrow:</strong> {principal ? `${parseFloat(principal).toFixed(6)}` : 0} USDC</p>\n                </div>\n            </div>\n            \n            <div className=\"borrow-info\">\n                <div className=\"borrow-item\">\n                    <FaPercentage className=\"icon\"  title=\"The accrued interest of the borrow you made\"/>\n                    <p><strong>Accrued Interest:</strong> {accruedInterest ? `${parseFloat(accruedInterest).toFixed(6)}` : 0}</p>\n                </div>\n            </div>\n        </div>\n        </div>\n    );\n};\n\nexport default BorrowDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}